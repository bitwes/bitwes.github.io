
        <html><head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>
            .markdown-body {
                box-sizing: border-box;
                min-width: 200px;
                max-width: 980px;
                margin: 0 auto;
                padding: 45px;
            }

            @media (max-width: 767px) {
                .markdown-body {
                    padding: 15px;
                }
            }
        </style>
        <link rel="stylesheet" href="github-markdown.css"/>
</head><body><article class="markdown-body"><h1><a id="user-content-parameterized-tests" class="anchor" aria-hidden="true" href="#parameterized-tests"><span aria-hidden="true" class="octicon octicon-link"></span></a>Parameterized-Tests</h1>
<h2><a id="user-content-overview" class="anchor" aria-hidden="true" href="#overview"><span aria-hidden="true" class="octicon octicon-link"></span></a>Overview</h2>
<p>There are some scenarios where it is desireable to run a test numerous times with different parameters.  You can do this in GUT by creating a test that has a single parameter that is defaulted to the GUT method <code>use_parameters</code>.</p>
<h2><a id="user-content-requirements" class="anchor" aria-hidden="true" href="#requirements"><span aria-hidden="true" class="octicon octicon-link"></span></a>Requirements:</h2>
<ul>
<li>The test must have one and only one paramter.</li>
<li>The parameter must be defaulted to call <code>use_parameters</code>.</li>
<li>You must pass an array to <code>use_parameters</code>.  The test will be called once for each element in the array.</li>
<li>If the parameter is not defaulted then it will cause a runtime error.</li>
<li>If <code>use_parameters</code> is not called then GUT will only run the test once and will generate an error.</li>
</ul>
<h2><a id="user-content-example" class="anchor" aria-hidden="true" href="#example"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example</h2>
<p>Given:</p>
<div class="highlight highlight-source-gdscript"><pre><span class="pl-k">class</span> <span class="pl-en">Foo</span>:
  <span class="pl-k">func</span> <span class="pl-en">add</span>(<span class="pl-smi">p1</span>, <span class="pl-smi">p2</span>):
    <span class="pl-k">return</span> p1 <span class="pl-k">+</span> p2</pre></div>
<p>Then</p>
<div class="highlight highlight-source-gdscript"><pre><span class="pl-k">extends</span><span class="pl-e"> GutTest</span>

<span class="pl-k">var</span> foo_params <span class="pl-k">=</span> [[<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>], [<span class="pl-s">'a'</span>, <span class="pl-s">'b'</span>, <span class="pl-s">'c'</span>]]

<span class="pl-k">func</span> <span class="pl-en">test_foo</span>(<span class="pl-smi">params</span><span class="pl-k">=</span><span class="pl-c1">use_parameters</span>(foo_params)):
  <span class="pl-k">var</span> foo <span class="pl-k">=</span> <span class="pl-c1">Foo</span>.<span class="pl-c1">new</span>()
  <span class="pl-k">var</span> result <span class="pl-k">=</span> foo.<span class="pl-c1">add</span>(params[<span class="pl-c1">0</span>], params[<span class="pl-c1">1</span>])
  <span class="pl-c1">assert_eq</span>(result, params[<span class="pl-c1">2</span>])</pre></div>
<p>Which would result in :</p>
<ul>
<li>one passing test (<code>1 + 2 = 3</code>)</li>
<li>one failing test (<code>'a' + 'b'  != 'c'</code>, it actually equals <code>'ab'</code>)</li>
</ul>
<h2><a id="user-content-helpers-parameterfactory" class="anchor" aria-hidden="true" href="#helpers-parameterfactory"><span aria-hidden="true" class="octicon octicon-link"></span></a>Helpers (ParameterFactory)</h2>
<h3><a id="user-content-named_parametersnames-values" class="anchor" aria-hidden="true" href="#named_parametersnames-values"><span aria-hidden="true" class="octicon octicon-link"></span></a>named_parameters(names, values)</h3>
<p>Creates an array of dictionaries.  It pairs up the names array with each set
of values in values.  If more names than values are specified then the missing
values will be filled with nulls.  If more values than names are specified
those values will be ignored.</p>
<p>Example:</p>
<pre><code>ParameterFactory.named_parameters(['a', 'b'], [[1, 2], ['one', 'two']])
# returns [{a:1, b:2}, {a:'one', b:'two'}]

# extra values
ParameterFactory.named_parameters(['a'], [[1, 2], [3, 4]])
# returns [{a:1}, {a:3}]

# not enough values
ParameterFactory.named_parameters(['a', 'b'], [[1], 'oops', ['one', 'two']])
# returns [{a:1, b:null}, {a:'oops', b:null}, {a:'one', b:'two'}]
</code></pre>
<p>This allows you to increase readability of your parameterized tests:</p>
<div class="highlight highlight-source-gdscript"><pre><span class="pl-k">var</span> foo_params <span class="pl-k">=</span> <span class="pl-c1">ParameterFactory</span>.<span class="pl-c1">named_parameters</span>(
  [<span class="pl-s">'p1'</span>, <span class="pl-s">'p2'</span>, <span class="pl-s">'result'</span>], <span class="pl-c"><span class="pl-c">#</span> names</span>
  [[<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>], [<span class="pl-s">'a'</span>, <span class="pl-s">'b'</span>, <span class="pl-s">'c'</span>]]) <span class="pl-c"><span class="pl-c">#</span> values</span>

<span class="pl-k">func</span> <span class="pl-en">test_foo</span>(<span class="pl-smi">params</span><span class="pl-k">=</span><span class="pl-c1">use_parameters</span>(foo_params)):
  <span class="pl-k">var</span> foo <span class="pl-k">=</span> <span class="pl-c1">Foo</span>.<span class="pl-c1">new</span>()
  <span class="pl-k">var</span> result <span class="pl-k">=</span> foo.<span class="pl-c1">add</span>(params.p1, params.p2)
  <span class="pl-c1">assert_eq</span>(result, params.result)</pre></div>
<h3><a id="user-content-others" class="anchor" aria-hidden="true" href="#others"><span aria-hidden="true" class="octicon octicon-link"></span></a>Others?</h3>
<p>If you have an idea for a helper please create an <a href="https://github.com/bitwes/Gut/issues">issue on Github</a>.</p>
</article></body>